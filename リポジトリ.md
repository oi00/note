# リポジトリ
## リポジトリとは
データストアとのやり取りを担当するもの  
ドメインオブジェクトから直接データストアとのやり取りをするのではなく、リポジトリを経由する  
アプリケーションとしての問題(データストアとのやり取り)をドメインの問題から切り離すための存在  

## リポジトリの責務
データストアが、DBなのかファイルなのかなど、データストアに関する関心ごとを引き受ける  
そのため、リポジトリはインターフェースで定義され、詳細はデータストアの種類ごとなどに定義される。  

## リポジトリに定義されるふるまい  
- 永続化に関するふるまい  
**オブジェクト**を、保存や破棄するメソッド 
```c#:title
interface IUserRepository
{
    /// オブジェクトを永続化するので、ふるまいはオブジェクトを引数にとる。
    void Save(User user);
}
```
```c#:title
interface IUserRepository
{
    /// 識別子と更新項目を引き渡して更新するようなふるまいはさせない。
    void UpdateName(UserId id, UserName name);
}
```
```c#:title
interface IUserRepository
{
    /// 破棄するふるまい
    void Delete(User user);
}
```
- 再構築に関するふるまい  
識別子によって検索されるメソッド
```c#:titel
interface IUserRepository
{
    /// 特定の1件を検索するメソッド
    User Find(UserId id);
    /// 全件検索するメソッド
    List<User> FindAll();
}
````